# Основы типов

## Наследование

Все типы прямо или косвенно являются производными от System.Object. Все значимые типы наследуются от ValueType, а ValueType - от System.Object.

У класса System.Object есть следующие открытые экземплярные методы:

Equals() - сравнение двух объектов на равенство

GetHashCode() - возвращает хеш-код значения данного объекта

ToString() - возвращает полное имя типа, в некоторых типах переопределен

GetType() - невиртуальный метод возвращает экземпляр объекта, производнго от Type

Защищенные методы:

MemberwiseClone() - невиртуальный метод создает новый экземпляр типа и присваивает полям нового объекта соответствующие значения объекта this

Finalize() - Вызывается, когда уборщик мусора определяет, что объект является мусором, но до возвращения занятой объектом памяти в кучу

## Создание типа

Все объекты ссылочных типов по требованию CLR должны создаваться оператором new. Допустимо для нового значения применять вместо new литерал default. Можно использовать оператор new при создании примитивных типов. Можно не использовать имя типа после new при указании типа объека.

```csharp
Employee e = new Employee();
int myInt = 0;
int myInt = default;
int i = new int();
int i = new();
```

Оператор new выполняет следующие действия:

1. Вычисление количества байтов, необходимых для хранения всех экземплярных полей типа и всех его базовых типов, в том числе System.Object. В каждый объект кучи дополнительно: указатель на объект-тип и индекс блока синхронизации. 

2. Выделение памяти для объекта с резервированием байтов в управляемой куче, инициализируются нулями (0).

3. Инициализация указателя на объект-тип и индекса блока синхронизации.

4. Вызов конструктора экземпляра типа с параметрами.

После этого он возвращает ссылку на вновь созданный объект. Ставшие ненужными или недоступными объекта среда CLR автоматически находит и освобождает.



