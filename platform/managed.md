# Управляемый код

Обычно при написании программы на C# формируется управляемый код. Он выполняется под управлением [общеязыковой среды выполнения (CLR)](./clr.md). Двоичный модуль, который содержит цправляемый код, называется сборкой (и наоборот, код, который не может обслуживатся средой .NET называется неуправляемый код). 

Двоичные модули .NET внутренне устроены совершенно отлично от неуправляемых (*.dll или *.exe). Они содержат не специфические, а независимые от платформы инструкции на промежуточном языке и метаданные типов.

Файлы (*.dll и *.exe) созданные компилятором .NET, называются сборкой. Сборка содержит код CIL. В дополнение к инструкциям CIL файл содержит метаданные, которые детально описывают детали каждого типа внутри двоичного модуля. Метаданные всегда есть в сборке и автоматом генерятся компилятором .NET. Метаданные применяются многочисленными аспектами исполняющей среды .NET, а также разнообразными инструментами разработки.

Плюс к этому помимо инструкций CIL и метаданных типов сами сборки также описываются с помощью метаданныех, которые официально называются манифестом. Манифест же содержит инфу: версия сборки, культура, список ссылок на внешние сборки. Помимо всего этого содержит еще информацию об авторских правах, информацию о всех внешних сборках, которые требуются для корректного функционирования сборки в среде CLR.

За генерацию метаданных типов и манифеста сборки отвечает компилятор среды разработки .NET.

Это дает свои преимущества и недостатки. Компилятор формирует исполняемый файл на общем промежуточном языке CIL для среды выполения CLR на платформе .NET ипользуя только библиотеку классов этой платформы. От любого языка получается компилятором схожий общий промежуточный код CIL.

Преимущества: современные способы работы с памятью, многоязыковая поддержка, повышение безопасности, поддержка управления версиями и четкая организация взаимодействия с другими программными компонентами.

Только компилятор C++ может писать разработчикам как управляемый, так и неуправляемый код и встраивать его в единый модуль.

>Для каждого целевого ЦП в карманах у среды .NET есть свой оптимизированный для него JIT копилятор (или jitter). 

Управляемы код может вызывать неуправляемый код из DLL. Управляемый код может использовать готовые компоненты COM. Неуправляемый код может использовать управляемый тип. 

Так как код написанный на C# будет выполнятся вместе с друми программными компонентами, написанными на других языках, он должен подчинятся [общеязыковой спецификации (CLS - Common Language Specification)](./cls.md), она и дает общий знаменатель всем языкам этой платформы и конечно C#. 

Эта спецификация входит в спецификацию [общая система типов (Common Type System — CTS)](./cts.md), в которой определяются правила типов данных для каждого языка, и конечно C#. 

>И вместе они подчиняются общеязыковой среде выполнения CLR.
