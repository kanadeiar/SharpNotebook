# Автономный уровень ADO.NET

Автономный уровень позволяет моделировать данные из базы данных в памяти, внутри вызывающего кода, применением членов из пространства имен System.Data. Применением автономного уровня можно моделировать реляционные данные в памяти, включая табличные блоки строк и столбцов, отношения между таблицами, ограничения столбцов, первичные ключи, представления и прочее. К смоделированным данным можно применять фильтры, отправлять запросы в память и сохранять/загружать данные в формате XML и в двоичном формате.

Для выборки и обновления данных в базе данных нужно задействовать объект - адаптер данных (абстрактный класс DbDataAdapter). Объекты адаптера перемещают данные из вызывающего кода и источника данных с примененением объектов DataSet. Последний - это контейнер для любого количества объектов DataTable - этот объект содержит колекцию объектов DataColumn и DataRow. Адаптеры данных удерживают подключение открытым в течении минимально возможного времени. Физическая база данных не обновляется, пока не будет передат объект DataTable из DataSet адаптеру даных для обновления.

## Контейнер объектов базы данных DataSet

Этот объект содержит в себе коллекцию таблиц - свойство Tables. Можно программироваь отношения "родительский - дочерний" между таблицами, ограничение внешнего ключа через свойство Relations. А свойство ExtendedProperities позволяет создавать дополнительную информацию в виде пар "имя-значение".

Некоторые свойства DataSet:

Свойство                 | Описание
-------------------------|-------------------------
CaseSensitive            | Установка, что будет/нет чуствительно к регистру сравнение строк - по умолчанию false
DataSetName              | Дружественное имя объекта DataSet
EnforceConstrains        | Установка - соблюдаются ли правила ограничений при попытке выполнить любые операции обновления
HasErrors                | Получение значения что есть ошибки в любой строке любого объекта DataTable внутри DataSet
RemotingFormat           | Определение, каким образом DataSet должен сериализовать свое содержимое - в двоичном виде или XML

Некоторые методы DataSet:

Методы                   | Описание
-------------------------|-------------------------
AcceptChanges()          | Фиксирует все изменения, внесенные в текущий DataSet с момента его загрузки или последнего вызова AcceptChanges()












Код SQL генерации тестовой базы данных:
```csharp
CREATE TABLE [dbo].[Person] (
    [Id]   INT           IDENTITY (1, 1) NOT NULL,
    [Fam]  NVARCHAR (64) NOT NULL,
    [Name] NVARCHAR (64) NOT NULL,
    [Age]  INT           NOT NULL,
    CONSTRAINT [PK_Id_Person] PRIMARY KEY CLUSTERED ([Id] ASC)
);
CREATE TABLE [dbo].[Child] (
    [Id]       INT          IDENTITY (1, 1) NOT NULL,
    [Fam]      NVARCHAR (64) NOT NULL,
    [Name]     NVARCHAR (64) NOT NULL,
	[Age] INT NOT NULL,
    [PersonId] INT          NOT NULL,
    CONSTRAINT [PK_Id_Child] PRIMARY KEY CLUSTERED ([Id] ASC),
    CONSTRAINT [FK_Child_To_Person] FOREIGN KEY ([PersonId]) REFERENCES [dbo].[Person] ([Id])
);

INSERT INTO Person([Fam], [Name], [Age])
VALUES (N'Иванов', N'Иван', 20),
(N'Петров', N'Петр', 22),
(N'Сидоров', N'Сидор', 18);
INSERT INTO Child([Fam], [Name], [Age], [PersonId])
VALUES (N'Михаилов', N'Михаил', 3, 1),
(N'Навозов', N'Дмитрий', 13, 1),
(N'Логинов', N'Логин', 3, 2);
```










