# Консоль (ввод/вывод через консоль)

## Русификация ввода-вывода в консоли
```c
#include <windows.h>
SetConsoleCP(1251);
SetConsoleOutputCP(1251);
//возможный вариант
setlocale(LC_ALL, "russian");
getchar();
return 0;
```
Русификация на С++
```cpp
#include <iostream>
#include <windows.h>
int main()
{
	SetConsoleCP(1251);
	SetConsoleOutputCP(1251);
	return 0;
}
```

## Базовая программа 
```c
#include <windows.h>
#include <stdio.h>
int main(int argc, const char* argv[])
{
	SetConsoleCP(1251);
    SetConsoleOutputCP(1251);
	printf_s("Язык программирования %c \n", 'C');
	printf_s("Число %d\n", 23);
	printf_s("Это %.1f успеха\n", 99.3333);
	getchar();
	return 0;
}
``` 

## Очистка консоли
```c
system("cls");
``` 


## Вывод текста на экран

Назначение функции printf() - вывод данных на экран консоли. Ее формат:

printf(строка_формата [, данные])

Строка формата заключается в двойные кавычки как группа символов.
```c
printf_s("Язык программирования %d \n", 9);
``` 
Управляющие последовательности:
```c
\n - новая строка
\a - звуковое оповещение
\b - возврат каретки на один символ
\t - табуляция
\\ - вывод символа обратный слеш
\' - вывод симовла апострофа
\" - вывод символа двойных кавычек
``` 
Пример использования символов этих:
```c
printf_s("Колонка1\tКолонка2\tКолонка3\n");
printf_s("Писк компьютера\a\n");
printf_s("Эти\bо симолы \\\" \'<- и этот\n");
``` 
Символы преобразования используются для вывода переменных на экран с помощью printf().

Символы преобразования:
```c
%d - целое число
%f - число с плавающей точкой
%c - символ
%s - строка
``` 
Пример использования:
```c
printf_s("%s %d %.1f %c\n", "Сумма чисел", 55, -4.233, 'X'); //Сумма чисел 55 -4.2 X
``` 

Вывод текста на С++:
```cpp
#include <iostream>
#include <windows.h>
int main()
{
	SetConsoleCP(1251);
	SetConsoleOutputCP(1251);
	std::cout << "Привет!";
	std::cin.get();
	return 0;
}
```
К программе подключается библиотека iostream потоков ввода и вывода. Поток вывода - это последовательность символов на выходе программы. Поток вывода - cout. Поток ввода - cin. Можно записывать сразу несколько опреаторов <<. Можно записывать символы зерез апострофы. Для перехода на новую строку нужно ставить endl.

Пространство имен - область видимости объектов программы, в том числе переменных. Можно использовать строку using namespace std для использования пространства имен C++. 

Пример на С++:
```cpp
#include <iostream>
#include <windows.h>
using namespace std;
int main()
{
	SetConsoleCP(1251);
	SetConsoleOutputCP(1251);
	cout << "Привет, " << "Вася" << '!' << endl;
	cout << "Как дела? " << endl;
	cin.get();
	return 0;
}
```
Выходной поток можно форматировать, задавать количество позиций, отводимых на вывод каждого значения. setw(4) - 4 позиции на экране - три на запись числа и один пробел слева, разедляющий числа. 

Пример на С++:
```cpp
int a = 12, b = 25, c = 115;
cout << setw(4) << a << setw(4) << b << setw(4) << c;
```

Выходной поток можно форматировать, используя специальные манипуляторы, управляющие выводом. fixed - если нужно применить с фиксированной запятой, а затем определеить количество цифр в дробной части с помощью команды setprecision.

Пример вывода с двумя знаками после запятой:
```cpp
float x = 173.212321;
cout << "Вещественное число: " << endl;
cout << fixed << setprecision(2) << x << endl;
cout << "x = " << setprecision(1) << setw(8) << x << endl;
```

## Получение данных от пользователя

Функция scanf() позволяет принимать данные, вводимые с клавиатуры. 

scanf(строка_формата [, данные])

Когда код программы достигает функции этой, выполнение программы приостанавливатся и компьютер ожидает, пока пользователь введет необходимые данные. Переменные перечисленные в функции scanf() получают введенные пользователем значения. Выполнение функции завершается, когда пользователь нажимает клавишу Enter.

Пример выражений на языке С:
```c
char first;
int age;
int favorite_num;
printf_s("С какой буквы начинается Ваша фамилия? ");
scanf_s(" %c", &first);
printf_s("Сколько вам лет? ");
scanf_s(" %d", &age);
printf_s("Какое любимое число? ");
scanf_s(" %d", &favorite_num);
printf_s("\nВаша фамилия начинается на %c и вам %d лет\n", first, age);
printf_s("Ваше любимое число это %d\n", favorite_num);	
``` 
Перед каждым символом %c %d нужно ставить пробел, это для лучшей работы их (!?!?).

Пример еще различных запросов у пользователя в т.ч. числа с плавающей точкой:
```c
float price = 0.0;
char nach[24];
int mounth, day, year;
printf_s("Введите стоимость кефира в магазине (формат $XX.XX):> ");
scanf_s(" $%f", &price);
printf_s("Любимая начинка?> ");
scanf_s(" %s", nach, _countof(nach));
printf_s("Введите седняшнее число (формат XX/XX/XX):> ");
scanf_s(" %d/%d/%d", &day, &mounth, &year);
printf_s("Сегодня %d.%d.%d нужно съесть пирог с начинкой \"%s\" и запить кефиром за $%f", day, mounth, year, nach, price);
``` 
Еще пример:
```c
char name[64];
if (scanf_s(" %s", name, sizeof(name)) == 1)
    printf("Your name is %s\n", name);
``` 

Для того, чтобы пользователь мог поменять входные данные программы, нужно предусмотреть ввод данных с клавиатуры.

Ввод значений на С++.

int num1, num2;

cin >> num1;

Можно значения сразу несколько записывать.

cin >> num1 >> num2;

Пример ввода текста c клавиатуры на С++:

```cpp
#include <iostream>
#include <windows.h>
using namespace std;
int main()
{
	SetConsoleCP(1251);
	SetConsoleOutputCP(1251);
	cout << "Имя:";
	char name[33];
	cin >> name;
	cout << "Привет " << name << endl;
	cin.get();
	return 0;
}
```

Пример ввода вывода вещественного числа на С++:

```cpp
cout << "Введите вещественное число:> ";
float x;
cin >> x;
cout << "Введите 2 вещественных числа:> ";
float z;
cin >> x >> z;
cout << 999./x;
```

Для работы со строкой в консольном вводе/выводе нужно ползоваться функцией getline():
```c
cout << "Введите свое имя:> ";
string name;
getline(cin, name);
cout << "Привет, " << name + " Грозный" << '!' << endl;
```



## Специальные функции ввода-вывода

Существуют спец функции ввода одного символа с клавиатуры getchar(), а функция putchar() - выводит 1 символ на экран. Управление ходом выполнения программы не возвращается, пока пользователь не нажмет кнопку Enter. На самом деле функция getchar() принимает ввод в буфер, пока пользователь не нажмет кнопку Enter, после этого происходит освобождение буфера посимвольно. Можно воспользоватся клавишей Backspace чтобы в этой функции удалить ввод. Факт нажатия клавиши Enter сохраняется в буфере, нужно его удалять вручную.

Пример вывода строки текста:
```c
char msg[] = "Проба текста";
for (int i=0; i<strlen(msg); i++)
{
    putchar(msg[i]);
}
putchar('\n');
``` 
Пример ввода текста и его вывода:
```c
char msg[10];
printf_s("Введите 10 символов и нажмите Enter\n");
int len = 0;
for (int i=0; i < strlen(msg); i++)
{
    msg[i] = getchar();
    if (msg[i] == '\n')
    {
        len = i - 1;
        break;
    }
}
putchar('\n');
for (int i=0; i <= len; i++)
{
    putchar(msg[i]);
}
putchar('\n');
``` 
Пример обработки факта нажатия клавижи Enter после ввода символа:
```c
printf_s("Введите 1 одну букву:");
char letter1 = getchar();
getchar();
printf_s("Введите 2 одну букву:");
char letter2 = getchar();
getchar();
printf_s("Буква = %c & %c", letter1, letter2);
``` 

Специальная функция ввода символов getch() поможет избавится от лишней записи Enter. Эта функция безбуферная, она не ждет от пользователя нажатия клавиши Enter. Невозможность удаления ввода Backspace. Вывод - с помощью putch() так как первая функция по умолчанию не выводит введенные символы.

Пример:
```c
printf_s("Введите 1 одну букву:");
char ch1 = _getwch();
_putwch(ch1);
putchar('\n');
printf_s("Буква = %c", ch1);
``` 

Функция gets_s позволяет получить из консоли от пользователя сразу введенную строку:
```c
puts("Введите имя:>");
char name[256];
gets_s(name);
printf_s("Ваше имя: %s\n", name);
``` 