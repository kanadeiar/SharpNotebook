# Структуры

## Общее

Структура в языке С - это средство, с помощью которого можно группировать данные разных типов и получать доступ к каждой отдельной части этих данных, называемых членами. Если есть много тиких элементов данных, то нужно создавать массивы структур.

Объявление структуры:
```c
struct Sample
{
    char name[33];
    int id;
    int cost;
};
```
Объявление структуры определяет макет, или внешний вид структурв. После объявления формата структуры можно начать объявлять переменные. Объявление члена - это объявление переменных встроенных типов данных.

Объявление структуры рассказывают компилятору, как выглядит структура прежде, чем переменные этого типа данных можно объявить. 

Пример объявления структуры и массива из структурных переменных:
```c
struct Sample
{
    char name[33];
    int id;
};
Sample s; //один элемент
Sample items[10]; //массив из 10 элементов
gets(s.name);
strcpy(s.name, "Пипец");
printf("Имя: %s\n", s.name);
```
На С++
```cpp
struct Sample
{
    string name;
    int id;
};
Sample s; //один элемент
Sample items[10]; //массив из 10 элементов
cin >> s.name;
cin.get();
cout << "Имя: " << s.name << endl;
```

## Работа со структурой

Пример объявления указателя на структуру и резервирование участка динамической памяти для хранения структуры и привязывание указателя к этому участку памяти:
```c
Sample * item1; //Указатель на структуру
item1 = (Sample *)malloc(sizeof(Sample));
```

Запись и чтение данных в структурную переменную производится через оператор точку:

имяСтруктурнойПеременной.имяЧлена

Запись и чтение данных в структуру в динамической памяти через ссылку, то нужно через оператор структурного указателя ->.

имяУказателя->имяЧлена

Пример работы со структурами в массиве переменных:
```c
struct Sample
{
    char name[33];
    int id;
    int cost;
};
Sample samples[3];
for (int i=0; i < _countof(samples); i++)
{
    samples[i].id = i + 1;
    strcpy_s(samples[i].name, "Test");
    samples[i].cost = (i + 1) * 100;
}
puts("Коллекция:");
for (Sample el : samples)
{
    printf_s("%s номер %d стоимость %d\n", el.name, el.id, el.cost);
}
for (int i=0; i < _countof(samples); i++)
{
    free(samples[i]); //не забывать освобождать память!!!
}
```
Пример работы со структурой, размещаемой в динамической памяти:
```c
struct Sample
{
    char name[33];
    int id;
    int cost;
};
Sample * p_samples[3];
for (int i = 0; i < _countof(p_samples); i++)
{
    p_samples[i] = (Sample *)malloc(sizeof(Sample));
    p_samples[i]->id = i + 1;
    strcpy_s(p_samples[i]->name, "Test");
    p_samples[i]->cost = (i + 1) * 100;
}
puts("Коллекция из указателей:");
for (Sample * el : p_samples)
{
    printf_s("имя: %s номер: %d цена: %d\n", el->name, el->id, el->cost);
}
for (int i = 0; i < _countof(p_samples); i++)
{
    free(p_samples[i]);
}
```
