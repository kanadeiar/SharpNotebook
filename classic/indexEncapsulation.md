# Инкапсуляция

## Тип класса

Класс - определяемый пользоватлем тип, состоящий из полей данных (переменные) и членов, которые оперируют полями данных (конструкторы, свойства, методы, события). Набор полей данных класса представляет состояние экземлпяра класса (объекта). 

Простейшее возможное объявление класса:
```csharp
class Sample
{ }
```
Класс с объявленными полями данных:
```csharp
class Sample
{
    public string name;
    public int age;
}
```
> Поля могут быть объявленными закрытыми private, защищенными protected, публичными public.

Класс с добавленными методами:
```csharp
class Sample
{
    public string name;
    public int age;
    public void PrintStat() => WriteLine($"{name} - {age}");
    public void AddAge(int delta) => age += delta;
}
```
Использование этого класса:
```csharp
Sample amp = new Sample();
amp.name = "And";
amp.age = 18;
amp.AddAge(10);
amp.PrintStat(); //And - 28
```

## Размещение новых объектов с помощью new

Объекты должны размещатся в памяти с применением ключевого слова new. Первый оператор объявляет ссылку на определенный объект типа Sample. Ссылка будет указывать на действительный объект после ее явного присваивания.

## Конструкторы

Конструкторы позволяют устанавливать состояние объекта в момент его создания. Конструктор - это специальный метод класса, который вызывается при создании объекта с применением ключевого слова new. Имя конструктора всегда совпадает с именени класса. Каждый класс C# снабжается бесплатным стандартным конструтором, который в случае необходимости может быть переопределен. 

Пример переопределения стандартного конструктора:
```csharp
public Sample()
{
    name = "one";
    age = 1;
}
```

Помимо стандартного конструктора в классах могут определется специальные дополнительные конструкторы. 
```csharp
public Sample(string name, int age)
{
    this.name = name;
    this.age = age;
}
```
>Таким образом конструктор перегружен, появляется несколько способов создания объекта в время объеялвения.

Пример использования:
```csharp
Sample amp2 = new Sample("And", 14);
```
Конструктор можно описывать сжатым до выражения:
```csharp
public Sample(string name) => this.name = name;
```
Если не определен специальный конструктор, то компилятор C# срабжает класс стандартным конструктором, давая возможность пользователю размещать в памяти экземпляр необходимого класса с набором полей данных, которые установлены в корректные стандартные значения.

При этом как только определяется специальный уникальный конструктор, то компилятор стандартный конструктор удаляется и становится недоступным.

>Следовательно если нужно позволить создавать экземпляр класса как с помощью стандартного, так и специального конструктора, то необходимо явно переопределить стандартный конструктор.

Пример класса:
```csharp
class Sample
{
    public string name;
    public int age;
    
    public Sample() { }
    
    public Sample(string name) => this.name = name;

}
```

## Ключевое слово this

В языке C# имеется ключевое слово this, которое позволяет обращатся к текущему экземпляру класса. Одно из применений - устарнение неоднозначности при обращении к полям класса. Пример:
```csharp
public void SetName(string name)
{
    this.name = name;
}
```

Другое из применений - проектирование класса с использованием приема, который называется построением цепочки конструкторов. Совершенный подход предполагает назначение одного из констркторов главным и выполнение необходимой логики и проверок внутри него, а остальные через ключевое слово this будут передавать входные аргументы главному конструтору.

Пример построения такого класса:
```csharp
class Sample
{
    public string name;
    public int age;
    public Sample() {}
    public Sample(int age) : this("", age) {}
    public Sample(string name) : this(name, 0) {}
    public Sample(string name, int age) //главный конструктор
    {
        this.name = name;
        if (age > 99)
        {
            age = 99;
        }
        this.age = age;
    }
}
```





